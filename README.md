## 瀑布流实现的几种方式

### 1.multi-column

实现瀑布流主要依赖以下几个属性：

`column-count`: 设置共有几列
`column-width`: 设置每列宽度，列数由总宽度与每列宽度计算得出
`column-gap`: 设置列与列之间的间距
`break-inside`: avoid; 设置元素不能中断

### 2.grid 布局实现瀑布流

`display`:设置为 grid 指明当前容器为 Grid 布局
`grid-template-columns`: 定义每一列的列宽
`grid-template-rows`: 定义每一行的行高
`column-gap`：用于设置列间距

`grid-template-columns和grid-template-rows`，可以使用绝对单位，也可以使用百分比。并且为了表示比例关系，Grid 布局提供了 `fr` 关键字，如果设置 1fr 和 2fr，表示后者是前者的两倍。

### 3.Flexbox 实现瀑布流

一种是直接用 flex 布局，从上往下再从左至右，这种需要提前给容器设置一个高度，而这个高度是多少，很难计算
一种是，容器里面分列，比如分为两列，这种的话与 grid 布局一致，需要需要知道图片的高度，通过图片的高度动态修改样式属性

### 4.position + js 计算高度

在入口函数中调用函数 waterFall() 实现瀑布流布局。传递两个参数，都为 String 类型。第一个参数是父盒子的选择器名，第二个参数是子盒子的选择器名。

```js
window.addEventListener("load", function () {
  //1、实现瀑布流布局
  waterFall("main", "box");
});
```

#### JS 代码详解----父盒子居中

在 css 代码中我们并没有让父盒子居中，是因为父盒子宽度是随着浏览器宽度的改变而改变的。因此在 waterFall() 实现瀑布流函数中我们首先要做的就是使父盒子居中。

这里提一些大家需要注意的地方
（1）获取文档的宽度时推荐写兼容写法（大噶可以参考：Scroll 家族（写法类似））
（2）`boxWidth` 是每一个子盒子的宽度，因为瀑布流布局的特点是图片的宽度相同的，高度不同，所以每一个子盒子的宽度都是相同的。
（3）设置父盒子的宽度，其宽度即子盒子所占列数 \* 子盒子的宽度。
（4）设置父盒子 `margin = '0 auto`’ 达到父盒子居中的效果

#### JS 代码详解----子盒子定位

这里提一些大家需要注意的地方
（1）根据瀑布流布局的原理，我们需要把每一列子盒子的高度存放在一个数组中，即 ·，将新的子盒子每次追加在最小高度的子盒子的后面。这一步骤使用 for 循环* 和 if 判断 语句就可以实现
（2）函数 `minBox(box)` 可以传递一个数组类型的参数，作用是找到数组中的最小值，并且特别注意返回的是最小值的下标
（3）设置新的子盒子的定位，首先要设置 `position = ‘absolute`’; （子绝父相）。其 left 即为 下标值 * 子盒子宽度，top 值为其所跟子盒子的高度。
（4）更新高度作为该一列的高度。

### 5.position + js 计算高度 升级版

这里提一些大家需要注意的地方
（1）在浏览器滚动的监听器首先要使用 `check()`函数 检查是否需要增加 新数据
（2）在这里使用的是一个数组（实质是假数据）实现新数据加载的功能
（3）遍历数组，创造新的节点追加到浏览器中
（4）追加新数据后重新进行瀑布流布局

追加检查函数和 scroll 兼容性写法
（1）`check()`函数 为 true 的条件是 数组最后一个元素的`高度 + 盒子高度的一半 <= 页面高度 + 页面滚出浏览器的高度（偏移高度）`
（2）`scroll()`函数 的作用是得到页面滚出浏览器的高度的兼容性写法

写在最后
文中如有错误，欢迎在评论区指正，如果这篇文章帮到了你，欢迎点赞和关注
本文同步首发与 github，可在 github 中找到更多精品文章，欢迎 Watch & Star ★
